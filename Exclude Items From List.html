<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exclude Items From List</title>
</head>

<body>
    <script>
        function excludeItems(items, excludes) {

            function buildExclusionMap() {
                const map = {};
                excludes.forEach(item => {
                    if (!map[item.k]) map[item.k] = [];
                    if (map[item.k].includes(item.v)) return false;
                    map[item.k].push(item.v);
                });
                return map;
            }


            const exclusionMap = buildExclusionMap();


            return items.filter(row => {
                for (const key in row) {
                    const val = row[key];
                    if (exclusionMap[key] && exclusionMap[key].includes(val)) {
                        return false;
                    }
                }
                return true;
            });

        }




        let items = [
            { color: 'red', type: 'tv', age: 18 },
            { color: 'silver', type: 'phone', age: 20 },
            { color: 'blue', type: 'book', age: 17 },
        ];

        const excludes = [
            { k: 'color', v: 'red' },
            { k: 'type', v: 'phone' },
        ];

        console.log(excludeItems(items, excludes));

    </script>
</body>

</html>